appId: com.speechtotext.app
productName: Speech to Text
directories:
  buildResources: assets
  output: dist

# Only include what's needed - electron-builder auto-prunes devDependencies
files:
  - dist/**/*
  - build/**/*
  - package.json
  # Exclude unnecessary files from node_modules
  - "!**/node_modules/*/{CHANGELOG.md,README.md,README,readme.md,readme}"
  - "!**/node_modules/*/{test,__tests__,tests,powered-test,example,examples}"
  - "!**/node_modules/*.d.ts"
  - "!**/node_modules/.bin"
  - "!**/*.{iml,o,hprof,orig,pyc,pyo,rbc,swp,csproj,sln,xproj}"
  - "!.editorconfig"
  - "!**/._*"
  - "!**/{.DS_Store,.git,.hg,.svn,CVS,RCS,SCCS,.gitignore,.gitattributes}"
  - "!**/{tsconfig.json,tsconfig.*.json}"
  # Exclude native module build artifacts (CRITICAL for size reduction)
  - "!**/node_modules/**/build/**/*"
  - "!**/node_modules/**/deps/**/*"
  - "!**/node_modules/**/src/**/*.{c,cc,cpp,h,hpp}"
  - "!**/node_modules/**/{binding.gyp,Makefile,*.mk}"
  - "!**/node_modules/**/*.{a,lib,obj}"
  - "!**/node_modules/**/prebuilds/**/*"
  - "!**/node_modules/**/{doc,docs,documentation}/**/*"
  - "!**/node_modules/**/{man,man1,man2,man3}/**/*"
  - "!**/node_modules/**/*.map"

# Enable asar for faster loading and smaller size
asar: true

# Unpack native modules (they can't run from inside asar)
asarUnpack:
  - "**/node_modules/better-sqlite3/**/*.node"
  - "**/node_modules/uiohook-napi/**/*.node"

win:
  target:
    - nsis
    - portable
  icon: assets/icon.ico

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true

mac:
  target:
    - dmg
    - zip
  category: public.app-category.productivity
  entitlements: ./entitlements.mac.plist
  entitlementsInherit: ./entitlements.mac.plist
  icon: assets/icon.icns

linux:
  target:
    - AppImage
    - deb
  category: Office
  icon: assets/icon.png

# Compression for smaller downloads (maximum = smallest size, slower build)
compression: maximum
